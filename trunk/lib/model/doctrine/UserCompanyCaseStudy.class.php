<?php

/**
 * UserCompanyCaseStudy
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    symfony
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class UserCompanyCaseStudy extends BaseUserCompanyCaseStudy {

    public function getSector() {
        return ($this->getEmpresaSectorTres() && $this->getEmpresaSectorTres()->getId()) ? $this->getEmpresaSectorTres() : $this->getEmpresaSectorDos();
    }

    public function getSectorTres() {
        return $this->getEmpresaSectorTres();
    }

    public function getSectorName() {
        return $this->getEmpresaSectorUnoId() ? $this->getEmpresaSectorUno() : '';
    }

    public function getSubSectorName() {
        return $this->getEmpresaSectorDosId() ? $this->getEmpresaSectorDos() : '';
    }

    public function getSectorId() {
        return $this->getEmpresaSectorTres()->getId() ? $this->getEmpresaSectorTres()->getId() : $this->getEmpresaSectorDos()->getId();
    }

    /**
     * Devuelve el municipio y provincia. Si la localidad es capital, solo devuelve el municipio.
     *
     * @return string|City
     */
    public function getMunicipioProvincia($codigoPostal = false) {
//si no hay localidad (caso solo para "toda españa") devuelve la provincia.

        if ($this->getLocalidad()->getIsCapital()) {
            $html = $this->getLocalidad();

            return $html;
        } else {
            $html = $this->getLocalidad() . ' (';
            if ($codigoPostal) {
                $html .= $this->getCodigopostal() == '' ? '' : $this->getCodigopostal() . ' - ';
            }
            $html .= $this->getStates() . ')';
            return $html;
        }

        return $this->getLocalidad();
    }

    public function getCpMunicipioProvinciaCongi() {
//si no hay localidad (caso solo para "toda españa") devuelve la provincia.
        $html = '';

        if ($this->getLocalidad() == '') {
            $html .= $this->getStates();

            return $html;
        }

        if ($this->getLocalidad()->getIsCapital()) {
            $html .= $this->getLocalidad();

            return $html;
        } else {
            $html .= $this->getLocalidad() . ' (';
            $html .= $this->getStates() . ')';
            return $html;
        }

        return $this->getLocalidad();
    }

    /**
     * Devuelve el municipio y provincia. Si la localidad es capital, solo devuelve el municipio.
     *
     * @return string|City
     */
    public function getCMunicipioProvincia() {
//si no hay localidad (caso solo para "toda españa") devuelve la provincia.
        $html = '';

        /*   if (null != $this->getCodigopostal()) {
          $html .= $this->getCodigopostal() . ' ';
          } */
        if ($this->getCityId() == '') {
            $html .= $this->getStates();
            return $html;
        }
        if ($this->getLocalidad()->getIsCapital()) {
            $html .= $this->getLocalidad();
            return $html;
        } else {
            $html .= $this->getLocalidad() . ' (';
            $html .= $this->getStates() . ')';
            return $html;
        }

        return $this->getLocalidad();
    }

    /**
     * Get Created at with format
     * @param type $format 
     */
    public function getFCreatedAt($format = 'D, d M Y H:i:s') {
        echo date($format, strtotime($this->getCreatedAt()));
    }

    public function getUserNames($user_id = null) {
        if ($user_id == null)
            $user_id = $this->getUserId();
        $user = Doctrine::getTable('SfGuardUser')->find($user_id);
        return $user->getUsername();
    }

}