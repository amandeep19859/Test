<?php

/**
 * StatesTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class StatesTable extends Doctrine_Table
{

    public static $capitales = array(
        'Madrid',
        'Barcelona'
    );
    /**
     * Returns an instance of this class.
     *
     * @return object StatesTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('States');
    }

    public function getWithoutTodas()
    {
    	$elements  = $this->createQuery()->where('name != "Todas"')->orderBy('orden')->execute();

    	return $elements;
    }

    public function getWithTodas()
    {
    	$elements  = $this->createQuery()->orderBy('name')->execute();

    	return $elements;
    }

    public static function getCiudadesAutonomas()
    {
        return Doctrine_Core::getTable('City')->createQuery('c')
            ->select('c.name, c.id, c.states_id')
            ->innerJoin('c.States s')
            ->where('s.name=? or s.name=? or s.name=?', array('Ceuta', 'Melilla','Toda EspaÃ±a'))
            ->execute(NULL, DOCTRINE::HYDRATE_ARRAY);
    }
}